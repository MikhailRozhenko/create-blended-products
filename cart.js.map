{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["//–õ–æ–≥—ñ–∫–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ Cart\n\nimport iziToast from 'izitoast';\nimport {\n  addToCart,\n  addToWishList,\n  closeDivModal,\n  openClickDivModalOpen,\n} from './js/modal';\nimport { fetchItemEndPoint } from './js/products-api';\nimport { refs } from './js/refs';\nimport { renderEndpoints } from './js/render-function';\nimport { getFromLS } from './js/storage';\n\nexport function showSuccessPurchaseToast(totalPrice) {\n  iziToast.show({\n    title: 'üõí –ü–æ–∫—É–ø–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞',\n    message: `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø—Ä–∏–æ–±—Ä–µ–ª–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å—É–º–º—É <b>${totalPrice}$</b>.<br>üöö –î–æ—Å—Ç–∞–≤–∫–∞ –±—É–¥–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ <b>2 –¥–Ω–µ–π</b>.`,\n    position: 'topRight',\n    timeout: 4500,\n    progressBar: true,\n    close: true,\n    pauseOnHover: true,\n    animateInside: true,\n    transitionIn: 'fadeInDown',\n    transitionOut: 'fadeOutUp',\n\n    backgroundColor: '#FFD54F',\n\n    titleColor: '#1a1a1a',\n    messageColor: '#1a1a1a',\n    progressBarColor: '#FFB300',\n  });\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const getWishlist = getFromLS('wishlist');\n  let countWishlist;\n  if (!getWishlist) {\n    countWishlist = 0;\n  } else {\n    countWishlist = getWishlist.length;\n  }\n  refs.spanWishlist.textContent = countWishlist;\n\n  const getWishlistCart = getFromLS('cart');\n  let countWishlistCart;\n  if (!getWishlistCart) {\n    countWishlistCart = 0;\n  } else {\n    countWishlistCart = getWishlistCart.length;\n  }\n  refs.spanCart.textContent = countWishlistCart;\n});\n\ndocument.addEventListener('DOMContentLoaded', addToCartItem);\n\nasync function addToCartItem() {\n  const cart = getFromLS('cart');\n  if (!cart || cart.length === 0) {\n    refs.productsList.innerHTML = '';\n    return;\n  }\n  const promises = cart.map(id => fetchItemEndPoint(id));\n  const products = await Promise.all(promises);\n  renderEndpoints(products);\n  const productsLength = products.length;\n  refs.spanCartItems.textContent = productsLength;\n  const sum = products.reduce((accumulator, currentValue) => {\n    return accumulator + currentValue.price;\n  }, 0);\n  const sumTotal = Number(sum.toFixed(2));\n  refs.spanCartTotalPrice.textContent = `${sumTotal}$`;\n\n  refs.buttonBuyProducts.addEventListener('click', () => {\n    showSuccessPurchaseToast(`${sumTotal}`);\n  });\n}\n\naddToCartItem();\n\naddToWishList();\n\nopenClickDivModalOpen();\n\naddToCart();\n\ncloseDivModal();\n"],"names":["showSuccessPurchaseToast","totalPrice","iziToast","getWishlist","getFromLS","countWishlist","refs","getWishlistCart","countWishlistCart","addToCartItem","cart","promises","id","fetchItemEndPoint","products","renderEndpoints","productsLength","sum","accumulator","currentValue","sumTotal","addToWishList","openClickDivModalOpen","addToCart","closeDivModal"],"mappings":"gJAcO,SAASA,EAAyBC,EAAY,CACnDC,EAAS,KAAK,CACZ,MAAO,uBACP,QAAS,iDAAiDD,CAAU,uDACpE,SAAU,WACV,QAAS,KACT,YAAa,GACb,MAAO,GACP,aAAc,GACd,cAAe,GACf,aAAc,aACd,cAAe,YAEf,gBAAiB,UAEjB,WAAY,UACZ,aAAc,UACd,iBAAkB,SACtB,CAAG,CACH,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAME,EAAcC,EAAU,UAAU,EACxC,IAAIC,EACCF,EAGHE,EAAgBF,EAAY,OAF5BE,EAAgB,EAIlBC,EAAK,aAAa,YAAcD,EAEhC,MAAME,EAAkBH,EAAU,MAAM,EACxC,IAAII,EACCD,EAGHC,EAAoBD,EAAgB,OAFpCC,EAAoB,EAItBF,EAAK,SAAS,YAAcE,CAC9B,CAAC,EAED,SAAS,iBAAiB,mBAAoBC,CAAa,EAE3D,eAAeA,GAAgB,CAC7B,MAAMC,EAAON,EAAU,MAAM,EAC7B,GAAI,CAACM,GAAQA,EAAK,SAAW,EAAG,CAC9BJ,EAAK,aAAa,UAAY,GAC9B,MACD,CACD,MAAMK,EAAWD,EAAK,IAAIE,GAAMC,EAAkBD,CAAE,CAAC,EAC/CE,EAAW,MAAM,QAAQ,IAAIH,CAAQ,EAC3CI,EAAgBD,CAAQ,EACxB,MAAME,EAAiBF,EAAS,OAChCR,EAAK,cAAc,YAAcU,EACjC,MAAMC,EAAMH,EAAS,OAAO,CAACI,EAAaC,IACjCD,EAAcC,EAAa,MACjC,CAAC,EACEC,EAAW,OAAOH,EAAI,QAAQ,CAAC,CAAC,EACtCX,EAAK,mBAAmB,YAAc,GAAGc,CAAQ,IAEjDd,EAAK,kBAAkB,iBAAiB,QAAS,IAAM,CACrDN,EAAyB,GAAGoB,CAAQ,EAAE,CAC1C,CAAG,CACH,CAEAX,IAEAY,IAEAC,IAEAC,IAEAC,EAAe"}